<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width, shrink-to-fit=no">
    <style>
      html, body {
        margin: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background-color: #000;
      }

      a:link, a:visited{
        color: #bdc3c7;
      }

    </style>
  </head>

  <body>

    <div id="progress"></div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/105/three.min.js"></script>
    <script src="../build/panolens.js"></script>

    <script>
      var identifier = {
        moment_id: "5b08295bdcc6b400130d942a",
        variation: 101,
        public_api_key: "63b130be-2f20-40a2-8211-355b607f340a"
      };
     
      var panomoment = new PANOLENS.PanoMomentPanorama( identifier, true );
      var viewer = new PANOLENS.Viewer( { output: 'console', autoHideInfospot: false, momentum: true, momentumFactor: 7.5 } );
      viewer.add( panomoment );

      var infospot = new PANOLENS.Infospot(.1);
      infospot.position.set( 0,0,0 );
      infospot.addHoverText( 'Tony Hawk' );
      panomoment.add( infospot );

      viewer.panorama.dispatchEvent( { 
          type: 'panolens-viewer-handler', 
          method: 'addUpdateCallback', 
          data: updateCallback
      });

      function updateCallback () {

        if (viewer.panorama == panomoment) {
          var currentYaw = THREE.Math.radToDeg(viewer.camera.rotation.y) + 180;
          if (currentYaw <= 360 && currentYaw >= 140) {
            infospot.material.visible = true;
          } else if (currentYaw > 0 || currentYaw < 140) {
            infospot.material.visible = false;
          }
        }

      }

    </script>

  </body>
</html>